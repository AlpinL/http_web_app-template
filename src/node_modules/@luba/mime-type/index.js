'use strict';

// import

const Path = require('path');
const FileSystem = require('fs');

// state

const mapFileExtToMimeType = {};
const mapMimeTypeToFileExt = {};

// run

initialize();

// export

module.exports = {
	toMimeType,
	toFileExtention,
};

// functions

function initialize() {
	FileSystem.readFileSync(Path.resolve(__dirname, 'mime-types.csv'), 'utf8')
		.trim()
		.split('\n')
		.forEach(line => {
			const [fileExt, mimeType] = line.trim().split(',');
			mapFileExtToMimeType['.' + fileExt] = mimeType;
			mapMimeTypeToFileExt[mimeType] = '.' + fileExt;
		});
}

function toMimeType(fileExt) {
	return mapFileExtToMimeType[fileExt] || 'application/octet-stream';
}

function toFileExtention(mimeType) {
	return mapMimeTypeToFileExt[mimeType] || 'txt';
}

